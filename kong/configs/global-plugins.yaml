_format_version: "3.0"

plugins:
  - name: prometheus
    enabled: true
    config:
      per_consumer: false
      status_code_metrics: true
      latency_metrics: true
      bandwidth_metrics: true
      upstream_health_metrics: true

  # 監査ログプラグイン（標準出力に出力）
  - name: file-log
    enabled: true
    config:
      path: /dev/stdout
      reopen: false
      custom_fields_by_lua:
        client_ip: "return ngx.var.remote_addr"
        request_id: "return kong.ctx.shared.request_id or ngx.var.request_id"
